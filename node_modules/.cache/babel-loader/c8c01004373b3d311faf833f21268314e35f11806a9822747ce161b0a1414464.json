{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\My\\\\306project\\\\src\\\\pages\\\\AdminPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { db } from '../firebase/config';\nimport { collection, query, orderBy, onSnapshot, addDoc } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminPage() {\n  _s();\n  const [conversations, setConversations] = useState({});\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [reply, setReply] = useState('');\n  useEffect(() => {\n    const messagesRef = collection(db, 'support_messages');\n    const q = query(messagesRef, orderBy('timestamp', 'asc'));\n    const unsubscribe = onSnapshot(q, querySnapshot => {\n      const messagesByUser = {};\n      querySnapshot.forEach(doc => {\n        const message = {\n          id: doc.id,\n          ...doc.data()\n        };\n        if (!messagesByUser[message.userId]) {\n          messagesByUser[message.userId] = [];\n        }\n        messagesByUser[message.userId].push(message);\n      });\n      setConversations(messagesByUser);\n    });\n    return () => unsubscribe();\n  }, []);\n  const handleReply = async e => {\n    e.preventDefault();\n    try {\n      const messagesRef = collection(db, 'support_messages');\n      await addDoc(messagesRef, {\n        name: 'Admin',\n        message: reply,\n        timestamp: new Date(),\n        userId: selectedUser,\n        isAdmin: true\n      });\n      setReply('');\n    } catch (error) {\n      console.error(\"Error sending reply: \", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid grid-cols-12 gap-4 p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-span-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white shadow rounded-lg p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-bold mb-4\",\n          children: \"Conversations\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 10\n        }, this), Object.entries(conversations).map(([userId, messages]) => /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => setSelectedUser(userId),\n          className: `p-3 rounded cursor-pointer ${selectedUser === userId ? 'bg-blue-100' : 'hover:bg-gray-100'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-semibold\",\n            children: messages[0].name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 14\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: messages[0].subject\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 14\n          }, this)]\n        }, userId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 12\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 6\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-span-8\",\n      children: selectedUser && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white shadow rounded-lg p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-[calc(100vh-200px)] overflow-y-auto space-y-4\",\n          children: conversations[selectedUser].map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex ${msg.isAdmin ? 'justify-end' : ''}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `p-3 rounded-lg max-w-[70%] ${msg.isAdmin ? 'bg-blue-100' : 'bg-gray-100'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-semibold\",\n                children: msg.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 20\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: msg.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 20\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-500\",\n                children: new Date(msg.timestamp).toLocaleString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 20\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 18\n            }, this)\n          }, msg.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 16\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleReply,\n          className: \"mt-4 flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: reply,\n            onChange: e => setReply(e.target.value),\n            placeholder: \"Type your reply...\",\n            className: \"flex-1 p-2 border rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 14\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"bg-blue-500 text-white px-4 py-2 rounded\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 14\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 10\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 6\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 4\n  }, this);\n}\n_s(AdminPage, \"bVz/uOlB74OYDtQVC/ymXbe+PoQ=\");\n_c = AdminPage;\nexport default AdminPage;\nvar _c;\n$RefreshReg$(_c, \"AdminPage\");","map":{"version":3,"names":["React","useState","useEffect","db","collection","query","orderBy","onSnapshot","addDoc","jsxDEV","_jsxDEV","AdminPage","_s","conversations","setConversations","selectedUser","setSelectedUser","reply","setReply","messagesRef","q","unsubscribe","querySnapshot","messagesByUser","forEach","doc","message","id","data","userId","push","handleReply","e","preventDefault","name","timestamp","Date","isAdmin","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Object","entries","map","messages","onClick","subject","msg","toLocaleString","onSubmit","type","value","onChange","target","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/My/306project/src/pages/AdminPage.js"],"sourcesContent":["\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { db } from '../firebase/config';\r\nimport { collection, query, orderBy, onSnapshot, addDoc } from 'firebase/firestore';\r\n\r\nfunction AdminPage() {\r\n const [conversations, setConversations] = useState({});\r\n const [selectedUser, setSelectedUser] = useState(null);\r\n const [reply, setReply] = useState('');\r\n\r\n useEffect(() => {\r\n   const messagesRef = collection(db, 'support_messages');\r\n   const q = query(messagesRef, orderBy('timestamp', 'asc'));\r\n\r\n   const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n     const messagesByUser = {};\r\n     querySnapshot.forEach(doc => {\r\n       const message = { id: doc.id, ...doc.data() };\r\n       if (!messagesByUser[message.userId]) {\r\n         messagesByUser[message.userId] = [];\r\n       }\r\n       messagesByUser[message.userId].push(message);\r\n     });\r\n     setConversations(messagesByUser);\r\n   });\r\n\r\n   return () => unsubscribe();\r\n }, []);\r\n\r\n const handleReply = async (e) => {\r\n   e.preventDefault();\r\n   try {\r\n     const messagesRef = collection(db, 'support_messages');\r\n     await addDoc(messagesRef, {\r\n       name: 'Admin',\r\n       message: reply,\r\n       timestamp: new Date(),\r\n       userId: selectedUser,\r\n       isAdmin: true\r\n     });\r\n     setReply('');\r\n   } catch (error) {\r\n     console.error(\"Error sending reply: \", error);\r\n   }\r\n };\r\n\r\n return (\r\n   <div className=\"grid grid-cols-12 gap-4 p-4\">\r\n     <div className=\"col-span-4\">\r\n       <div className=\"bg-white shadow rounded-lg p-4\">\r\n         <h2 className=\"text-xl font-bold mb-4\">Conversations</h2>\r\n         {Object.entries(conversations).map(([userId, messages]) => (\r\n           <div\r\n             key={userId}\r\n             onClick={() => setSelectedUser(userId)}\r\n             className={`p-3 rounded cursor-pointer ${\r\n               selectedUser === userId ? 'bg-blue-100' : 'hover:bg-gray-100'\r\n             }`}\r\n           >\r\n             <p className=\"font-semibold\">{messages[0].name}</p>\r\n             <p className=\"text-sm text-gray-600\">{messages[0].subject}</p>\r\n           </div>\r\n         ))}\r\n       </div>\r\n     </div>\r\n     \r\n     <div className=\"col-span-8\">\r\n       {selectedUser && (\r\n         <div className=\"bg-white shadow rounded-lg p-4\">\r\n           <div className=\"h-[calc(100vh-200px)] overflow-y-auto space-y-4\">\r\n             {conversations[selectedUser].map(msg => (\r\n               <div key={msg.id} className={`flex ${msg.isAdmin ? 'justify-end' : ''}`}>\r\n                 <div className={`p-3 rounded-lg max-w-[70%] ${\r\n                   msg.isAdmin ? 'bg-blue-100' : 'bg-gray-100'\r\n                 }`}>\r\n                   <p className=\"font-semibold\">{msg.name}</p>\r\n                   <p>{msg.message}</p>\r\n                   <p className=\"text-xs text-gray-500\">\r\n                     {new Date(msg.timestamp).toLocaleString()}\r\n                   </p>\r\n                 </div>\r\n               </div>\r\n             ))}\r\n           </div>\r\n           <form onSubmit={handleReply} className=\"mt-4 flex gap-2\">\r\n             <input\r\n               type=\"text\"\r\n               value={reply}\r\n               onChange={(e) => setReply(e.target.value)}\r\n               placeholder=\"Type your reply...\"\r\n               className=\"flex-1 p-2 border rounded\"\r\n             />\r\n             <button type=\"submit\" className=\"bg-blue-500 text-white px-4 py-2 rounded\">\r\n               Send\r\n             </button>\r\n           </form>\r\n         </div>\r\n       )}\r\n     </div>\r\n   </div>\r\n );\r\n}\r\n\r\nexport default AdminPage;\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}